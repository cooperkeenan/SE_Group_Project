<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="EnviroMonitorApp.Views.BackupManagementPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Backups">

  <StackLayout Padding="20" Spacing="12">

    <!-- Create & Refresh -->
    <Button
      Text="â–¶ Create Backup"
      Command="{Binding TriggerBackupCommand}"
      HorizontalOptions="Center" />

    <Button
      Text="â†» Refresh History"
      Command="{Binding RefreshHistoryCommand}"
      HorizontalOptions="Center" />

    <!-- NEW: Share -->
    <Button
      Text="ðŸ”— Share Last Backup"
      Command="{Binding ShareLastBackupCommand}"
      HorizontalOptions="Center" />

    <Label
      Text="Backup History"
      FontAttributes="Bold"
      Margin="0,10,0,0" />

    <CollectionView ItemsSource="{Binding History}">
      <CollectionView.ItemTemplate>
        <DataTemplate>
          <Frame Margin="0,6" Padding="12" HasShadow="False" BorderColor="LightGray">
            <StackLayout>
              <Label
                Text="{Binding Timestamp, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}"
                FontAttributes="Bold" />
              <Label Text="{Binding Status}" FontAttributes="Italic" />
              <Label Text="{Binding Details}" FontSize="Small" />
              <Label Text="{Binding Path}" FontSize="Micro" TextColor="Gray" />
            </StackLayout>
          </Frame>
        </DataTemplate>
      </CollectionView.ItemTemplate>
    </CollectionView>

  </StackLayout>
</ContentPage>
